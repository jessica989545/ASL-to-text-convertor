/*// What pins to connect the sensors to
#define FLEXSENSORPIN0 A0
#define FLEXSENSORPIN1 A1
#define FLEXSENSORPIN2 A2
#define FLEXSENSORPIN3 A3
#define FLEXSENSORPIN4 A4

//WILL HAVE TO CHANGE ONCE ON GLOVE AS PINS WILL LIKELY CHANGE
//int ledAnalogOne[] = {9, 3, 6}; //the three pins of the first analog LED in the order of red, green, blue
                                //These pins must be PWM

//defined variables for each sensor according to finger
float pinkyReading;
float ringReading;
float middleReading;
float indexReading;
float thumbReading;
 
void setup(void) {
  Serial.begin(9600);
  for(int i = 0; i < 3; i++){
   pinMode(ledAnalogOne[i], OUTPUT);   //Set the three LED pins as outputs
  }
}
 
void loop(void) {
  pinkyReading = singleReading(FLEXSENSORPIN1);
  ringReading = singleReading(FLEXSENSORPIN0);
  middleReading = singleReading(FLEXSENSORPIN2);
  indexReading = singleReading(FLEXSENSORPIN3);
  thumbReading = singleReading(FLEXSENSORPIN4);
 
  Serial.print('Single reading Pinky ');
  Serial.println(pinkyReading);

  Serial.print('Single reading Ring ');
  Serial.println(ringReading);

  Serial.print('Single reading Middle ');
  Serial.println(middleReading);

  Serial.print('Single reading Index ');
  Serial.println(indexReading);

  Serial.print('Single reading Thumb ');
  Serial.println(thumbReading);

  /*map 3 readings to be RBG values. The bottom and top values were taken by analyzing multiple readings to determine the best values to use.
  These values will likely be different for everyone so be sure to change them as they suit your project
  can use average() to determine the values as well*
  ringReading = mapReading(ringReading,200,580);
  pinkyReading = mapReading(pinkyReading,205,430);
  indexReading = mapReading(indexReading,280,560);
 
  setLED(pinkyReading, ringReading, indexReading);

  delay(1000);
}

/**
 * gets a reading from an analog pin
 * @param pin the pin to read from
 * @return the reading
 *
float singleReading(int pin)
{
  float reading;
  reading = analogRead(pin);
  return reading;
}

/**
 * maps an analog reading to a value between 0-254, 254 used for demonstration purposes to show that values were
 * being read and manipulated at all times. bottom and top values used are the average values when the sensor is bent (bottom)
 * and when it is held straight (top)
 * @param analogReading reading to be mapped
 * @param bottom the value used as the minimum value for the sensor
 * @param top the value used as the maximum value for the sensor
 * @return mapped value to be used for the RGB light
 *
float mapReading(float analogReading, float bottom, float top)
{
  float calibratedValue;
  if(analogReading > top)
  {
    calibratedValue = 254;
  }
  else if(analogReading < bottom)
  {
    calibratedValue = 0;
  }
  else
  {
    calibratedValue = map(analogReading, bottom,top,0,254);
  }
  return calibratedValue;
}

/**
 * sets the values for the RBG LED
 * @param red the value for the red light 0-255
 * @param green the value for the green light 0-255
 * @param blue the value for the blue light 0-255
 *
void setLED(float red, float green, float blue)
{
   Serial.println('');
   Serial.print('Red: ');
   Serial.println(red);
   Serial.print('Green: ');
   Serial.println(green);
   Serial.print('Blue: ');
   Serial.println(blue);
   Serial.println('');
   analogWrite(ledAnalogOne[0], red);
   analogWrite(ledAnalogOne[1], green);
   analogWrite(ledAnalogOne[2], blue);
}

/**
 * gets and print the average values taken from the sensor as per the NUMSAMPLES variable
 *
void average()
{
  int NUMSAMPLES = 100;
  uint8_t i;
  float average;
  int samples[NUMSAMPLES];
 
    // take N samples in a row, with a slight delay
  for (i=0; i< NUMSAMPLES; i++) {
    //Change the pin according to which sensor you are calibrating
   samples[i] = analogRead(FLEXSENSORPIN0);
   delay(10);
  }

  // average all the samples out
  average = 0;
  for (i=0; i< NUMSAMPLES; i++) {
     average += samples[i];
  }
  average /= NUMSAMPLES;
 
  Serial.print('Average reading ');
  Serial.println(average);
}
*/

#include <LiquidCrystal.h>

#define FLEXSENSORPIN0 A0
#define FLEXSENSORPIN1 A1
#define FLEXSENSORPIN2 A2
#define FLEXSENSORPIN3 A3
#define FLEXSENSORPIN4 A4

LiquidCrystal lcd(12,11,2,3,4,5);

int thumb = A0;
int index = A1;
int middle = A2;
int ring = A3;
int little = A4;
int sensorValue = 0; // value coming from the sensor
int output;

void setup() {
  Serial.begin(9600);
  lcd.begin(16,2);
  //lcd.setCursor(0,0);
  lcd.setCursor(16, 0);
  // set the display to automatically scroll:
  lcd.autoscroll();
 
 
}


void loop() {
 
  char x;
  int thumbValue = analogRead(thumb);
  int indexValue = analogRead(index);
  int middleValue = analogRead(middle);
  int ringValue = analogRead(ring);
  int littleValue = analogRead(little);
  int thumbOutput = map(thumbValue,0,1023,0,5);
  //Serial.println("t");
  //Serial.println(thumbOutput);
  int indexOutput = map(indexValue,0,1023,0,5);
  //Serial.println("i");
  //Serial.println(indexOutput);
  int middleOutput = map(middleValue,0,1023,0,5);
  //Serial.println("m");
  //Serial.println(middleOutput);
  int ringOutput = map(ringValue,0,1023,0,5);
  //Serial.println("r");
  //Serial.println(ringOutput);
  int littleOutput = map(littleValue,0,1023,0,5);
  //Serial.println("l");
  //Serial.println(littleOutput);
 
  int finalOut = ((thumbOutput*10000) + (indexOutput*1000) + (middleOutput*100) + (ringOutput*10) + (littleOutput));
//Serial.println("final out");
//Serial.println(finalOut);
  switch(finalOut)
  {
    case 0:
    x = 'A';
    break;
   
    case 4:
    x = 'B';
    break;
 
    case 40:
    x = 'C';
    break;
   
    case 400:
    x = 'D';
    break;

    case 4000:
    x = 'E';
    break;
   
    case 40000:
    x = 'F';
    break;
   
    case 44:
    x = 'G';
    break;
   
    case 404:
    x = 'H';
    break;
   
    case 4004:
    x = 'I';
    break;
   
    case 40004:
    x = 'J';
    break;
   
    case 44000:
    x = 'K';
    break;
   
    case 40400:
    x = 'L';
    break;
   
    case 40040:
    x='M';
    break;

     case 4400:
     x='N';
    break;

     case 440:
    x='O';
    break;

    case 444:
    x='P';
    break;

     case 4440:
    x='Q';
    break;

     case 44400:
    x='R';
    break;

     case 40404:
    x='S';
    break;

     case 40440:
    x='T';
    break;

     case  4444:
    x='U';
    break;

     case 44044:
    x='V';
    break;

    case 40444:
    x='W';
    break;

    case 44404:
    x='X';
    break;
   
    case 44440:
    x='Y';
    break;

    case 44040:
    x='Z';
    break;

    case 44444:
    x=' ';
    break;
  }

  //lcd.print(x);
  if(isAlpha(x) || x==' ')
  lcd.print(x);
  //Serial.println(x);
  delay(15000);
}
